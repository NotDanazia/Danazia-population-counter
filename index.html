<!DOCTYPE html>
<html>
<head>
    <title>Danazia Population Live</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #add8e6; /* Bleu légèrement plus foncé */
            padding: 20px;
        }
        #counter {
            font-size: 2em;
            color: #2e8b57;
        }
        h1 {
            color: #2e8b57;
        }
        img {
            max-width: 200px;
            margin: 20px auto;
        }
        #localTime {
            font-size: 1.5em;
            color: #555;
            margin-top: 20px;
        }
        #myChart {
            width: 80%;
            margin: 20px auto;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Danazia Population Live</h1>
    <img src="https://3ba8d8ca06.cbaul-cdnwnd.com/ad31ff7aa5568419f0bcf71e9af28d64/200000003-acfe8acfea/drapeau%20Danazie.webp?ph=3ba8d8ca06" alt="Drapeau de Danazia">
    <div id="counter">147,042,356</div>
    <div id="localTime">Local time: --:--:--</div>
    <canvas id="myChart"></canvas>
    <script>
        const populationData = {
            "1950": 19922402, "1951": 20132584, "1952": 21078452, "1953": 22200191, "1954": 23324567,
            "1955": 24432905, "1956": 25587413, "1957": 26643287, "1958": 27799574, "1959": 28934235,
            "1960": 30045267, "1961": 32124876, "1962": 34041234, "1963": 36182875, "1964": 38096372,
            "1965": 39372891, "1966": 41728493, "1967": 43183905, "1968": 44248163, "1969": 45693928,
            "1970": 47037182, "1971": 47896243, "1972": 48693157, "1973": 49472384, "1974": 50239874,
            "1975": 51003724, "1976": 51876903, "1977": 52698481, "1978": 53493129, "1979": 54289573,
            "1980": 55062847, "1981": 56379018, "1982": 57682940, "1983": 58999472, "1984": 60184935,
            "1985": 61563298, "1986": 62845761, "1987": 64109482, "1988": 65443187, "1989": 66782034,
            "1990": 68123982, "1991": 69738561, "1992": 71489234, "1993": 73248371, "1994": 74837098
        };

        const labels = Object.keys(populationData);
        const data = Object.values(populationData).map(value => value || 0); // Initialize with 0 for "Now"
        
        function formatNumberWithCommas(number) {
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        document.addEventListener("DOMContentLoaded", () => {
            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Danazia Population',
                        data: data,
                        borderColor: 'rgba(255, 0, 0, 1)', // Rouge
                        borderWidth: 2,
                        fill: false
                    }]
                },
                options: {
                    scales: {
                        x: { display: true },
                        y: { beginAtZero: false }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return formatNumberWithCommas(tooltipItem.raw);
                                }
                            },
                            backgroundColor: 'white',
                            titleColor: 'black',
                            bodyColor: 'black',
                            borderColor: 'rgba(0,0,0,0.1)',
                            borderWidth: 1
                        }
                    }
                }
            });

            function updateLocalTime() {
                const now = new Date();
                const utc3Time = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (3 * 3600000));
                const hours = utc3Time.getHours().toString().padStart(2, '0');
                const minutes = utc3Time.getMinutes().toString().padStart(2, '0');
                const seconds = utc3Time.getSeconds().toString().padStart(2, '0');
                document.getElementById("localTime").innerText = `Local time: ${hours}:${minutes}:${seconds}`;
            }

            setInterval(updateLocalTime, 1000);

            function updateRealTimePopulation() {
                const now = new Date();
                const daysElapsed = (now - new Date("2024-01-01T00:00:00-05:00").getTime()) / (1000 * 60 * 60 * 24);
                const annualGrowthRate = 0.02905; // 2.905%
                const growthFactor = Math.pow((1 + annualGrowthRate), daysElapsed / 365.25); // Including leap years
                const realTimeValue = Math.floor(147042356 * growthFactor); // Based on most recent population
                myChart.data.datasets[0].data[myChart.data.datasets[0].data.length - 1] = realTimeValue;
                myChart.update();
            }

            setInterval(updateRealTimePopulation, 1000);
        });
    </script>
</body>
</html>
